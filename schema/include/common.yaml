protocol: common

fields:
  name:
    type: string
  server:
    type: string
  port:
    type: integer
  ip-version:
    type: string
    optional: true
    default: dual
  udp:
    type: boolean
    optional: true
    default: false
  interface-name:
    type: string
    optional: true
  routing-mark:
    type: integer
    optional: true
  tfo:
    type: boolean
    optional: true
    default: false
  mptcp:
    type: boolean
    optional: true
    default: false
  dialer-proxy:
    type: string
    optional: true
  smux:
    type: map
    optional: true
  network:
    type: string
  # network: http
  http-opts:
    type: map
  # network: h2
  h2-opts:
    type: map
  # network: grpc
  grpc-opts:
    type: map
  # network: ws
  ws-opts:
    type: map

targets:
  clash:
    template:
      name:
        from: name
      server:
        from: server
      port:
        from: port
      ip-version:
        from: ip-version
        optional: true
        default: dual
      udp:
        from: udp
        optional: true
        default: false
      interface-name:
        from: interface-name
        optional: true
      routing-mark:
        from: routing-mark
        optional: true
      tfo:
        from: tfo
        optional: true
        default: false
      mptcp:
        from: mptcp
        optional: true
        default: false
      dialer-proxy:
        from: dialer-proxy
        optional: true
      smux:
        from: smux
        optional: true
      network:
        from: network
        optional: true
        default: "tcp"
      http-opts:
        from: http-opts
        optional: true
      h2-opts:
        from: h2-opts
        optional: true
      grpc-opts:
        from: grpc-opts
        optional: true
      ws-opts:
        from: ws-opts
        optional: true
  surge:
    template:
      name:
        from: name
      server:
        from: server
      port:
        from: port
      tfo:
        from: tfo
        optional: true
        default: false
      underlying-proxy:
        from: dialer-proxy
        optional: true
      smux:
        from: smux
        optional: true
      udp-relay:
        from: udp
        optional: true
        default: false
